<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>YeraltÄ± Åehri</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body{background:#0b0b0b;color:#fff;font-family:Arial;padding:20px}
h1{text-align:center}
button{width:100%;padding:14px;margin:8px 0;background:#1a1a1a;color:#fff;border:none;border-radius:8px;font-size:15px}
button:hover{background:#333}
.box{background:#151515;padding:15px;border-radius:8px;margin-bottom:15px}
.hidden{display:none}
small{color:#aaa}
.success{color:#4caf50}
.error{color:#f44336}
</style>
</head>

<body>

<h1>ğŸ”¥ YeraltÄ± Åehri</h1>

<div id="playerInfo" class="box">YÃ¼kleniyor...</div>

<button onclick="openNightlife()">ğŸŒƒ Gece HayatÄ±</button>
<button onclick="hospital()">ğŸ¥ Hastane</button>

<div id="nightlife" class="box hidden"></div>
<div id="result" class="box hidden"></div>

<script>
/* ================= SUPABASE ================= */
const sb = supabase.createClient(
  "https://hwhscuyudwphnsipibpy.supabase.co",
  "sb_publishable_dItLcV8z83CvDWuR8nTabA_ImTHGETu"
);
const TELEGRAM_ID = "162154220";

/* ================= UI ================= */
function showBox(id){
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}
function showResult(msg,err=false){
  showBox("result");
  document.getElementById("result").innerHTML =
    `<span class="${err?'error':'success'}">${msg}</span>`;
}

/* ================= PLAYER ================= */
async function loadPlayer(){
  const { data } = await sb.from("players")
    .select("*").eq("telegram_id", TELEGRAM_ID).single();
  if(!data) return;
  document.getElementById("playerInfo").innerHTML =
    `<b>Enerji:</b> ${data.energy} | <b>YTon:</b> ${data.yton}`;
}

/* ================= BUY ================= */
async function buy(id){
  const { data } = await sb.rpc("buy_item",{
    p_telegram_id: TELEGRAM_ID,
    p_item_id: id
  });
  showResult(data?.error ?? "SatÄ±n alÄ±ndÄ±", !!data?.error);
  loadPlayer();
}

/* ================= HOSPITAL ================= */
async function hospital(){
  const { data } = await sb.rpc("hospital_heal",{p_telegram_id: TELEGRAM_ID});
  showResult(data?.error ?? "Ä°yileÅŸtirildin", !!data?.error);
  loadPlayer();
}

/* ================= NIGHTLIFE ================= */
function openNightlife(){
  showBox("nightlife");
  document.getElementById("nightlife").innerHTML=`
    <b>ğŸŒƒ Gece HayatÄ±</b>
    <button onclick="openClub()">ğŸ¸ Gece KulÃ¼bÃ¼</button>
    <button onclick="openCoffee()">â˜• Coffee Shop</button>
    <button onclick="openBrothel()">ğŸ’‹ Genel Ev</button>
  `;
}

/* ================= GECE KULÃœBÃœ â€“ 30 ALKOL ================= */
const drinks = [
 "Bira","Åarap","Viski","Vodka","Rom","Tekila","Cin","LikÃ¶r","Absinthe","Brendi",
 "Åampanya","Prosecco","Bourbon","Scotch","Mezcal","Sake","RakÄ±","Aperol","Martini","Negroni",
 "Mojito","Daiquiri","Bloody Mary","Cosmopolitan","Old Fashioned","Manhattan","Caipirinha","Spritz","Gin Tonic","Long Island"
];

function openClub(){
  showBox("nightlife");
  let html="<b>ğŸ¸ Gece KulÃ¼bÃ¼</b><small> Enerji + Moral</small>";
  drinks.forEach((d,i)=>{
    html+=`<button onclick="buy(${100+i})">ğŸ¹ ${d} | +${2+i%5} Enerji â€“ ${10+i*2} YTon</button>`;
  });
  html+=`<button onclick="openNightlife()">â¬… Geri</button>`;
  document.getElementById("nightlife").innerHTML=html;
}

/* ================= COFFEE SHOP â€“ 30 UYUÅTURUCU ================= */
const drugs = [
 "Mantar","Ã‡izik","Pembe Toz","Beyaz Bulut","Kara TaÅŸ","YeÅŸil Kristal","Mavi Hap","KÄ±rmÄ±zÄ± Hap","AltÄ±n Toz","Gece Tozu",
 "Lunar","Solar","Venom","Ghost","Pulse","Echo","Nova","Zen","Rush","Flash",
 "Deep","Trip","Wave","Chill","Boost","Overdrive","Focus","Drift","Spice","Void"
];

function openCoffee(){
  showBox("nightlife");
  let html="<b>â˜• Coffee Shop</b><small> XP / Risk</small>";
  drugs.forEach((d,i)=>{
    html+=`<button onclick="buy(${200+i})">ğŸ’Š ${d} | XP +${3+i%7} â€“ ${30+i*3} YTon</button>`;
  });
  html+=`<button onclick="openNightlife()">â¬… Geri</button>`;
  document.getElementById("nightlife").innerHTML=html;
}

/* ================= GENEL EV â€“ 50 KARAKTER ================= */
const brothel = [
  /* 35 KadÄ±n */
  "Mia Khalite","Lana Roads","Abella Dangerz","Riley Reidz","Sasha Greyz","Eva Elfiee","Angela Whitee",
  "Brandi Lovee","Alexis Texas","Jenna Jamess","Emily Willss","Adriana Chekk","Violet Myerss","Nina Northh",
  "Lexi Lunaa","Ava Addamss","Kendra Lustt","Scarlett Sagee","Megan Rainn","Kimmy Grangerr",
  "Sofia Leonee","Valentina Nappii","Aria Alexiss","Autumn Fallss","Bella Rollins","Carmen Callawayy",
  "Daisy Taylorr","Ella Knoxx","Gina Valentinaa","Hazel Mooree","Ivy Wolfee","Jane Wildee","Kali Rosess","Lia Lovelacee","Mona Wales",

  /* 10 Erkek */
  "Johnny Sinsor","Manuel Ferrar","Rocco Steell","James Deenn","Lex Steelee","Jason Luvv","Markus Dupreee","Tommy Gunnr","Mike Adrianoo","Ramon Nomarr",

  /* 5 Ä°kiz */
  "Twin Angels","Double Trouble","Mirror Queens","Siam Night","Duo Desire"
];

function openBrothel(){
  showBox("nightlife");
  let html="<b>ğŸ’‹ Genel Ev</b><small> Enerji & Moral</small>";
  brothel.forEach((n,i)=>{
    html+=`<button onclick="buy(${300+i})">ğŸ’– ${n} â€“ ${30+i} YTon</button>`;
  });
  html+=`<button onclick="openNightlife()">â¬… Geri</button>`;
  document.getElementById("nightlife").innerHTML=html;
}

/* ================= INIT ================= */
loadPlayer();
</script>

</body>
</html>
